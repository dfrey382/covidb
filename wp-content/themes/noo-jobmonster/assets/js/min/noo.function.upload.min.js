!function(e){e.fn.noo_upload=function(i){var a={max_file_size:"2mb",runtimes:"html5,flash,html4",multipart:!0,urlstream_upload:!0,max_files:0,upload_enabled:!0,multi_upload:!1,url:nooUpload.url,delete_url:nooUpload.delete_url,flash_swf_url:nooUpload.flash_swf_url,resize:{}},t=(i=e.extend(a,i)).flash_swf_url,l=i.tag_thumb,d=e("#"+l),o=i.input_name,n=i.multi_upload,u=new plupload.Uploader({browse_button:i.browse_button,file_data_name:"aaiu_upload_file",multi_selection:i.multi_upload,url:i.url,flash_swf_url:t,filters:[{title:"extensions",extensions:"jpg,jpeg,gif,png"}],resize:i.resize,views:{thumb:!0},init:{PostInit:function(){d.innerHTML=""},FilesAdded:function(a,t){plupload.each(t,(function(a){!1===n?e("#"+i.browse_button).parent().find(".noo_upload-status").get(0).innerHTML='<div id="'+a.id+'">'+a.name+" ("+plupload.formatSize(a.size)+") <b></b></div>":e("#"+i.browse_button).parent().find(".noo_upload-status").get(0).innerHTML+='<div id="'+a.id+'">'+a.name+" ("+plupload.formatSize(a.size)+") <b></b></div>"})),u.start()},UploadProgress:function(i,a){e("#"+a.id)&&(e("#"+a.id).find("b").get(0).innerHTML="<span>"+a.percent+"%</span>")},Error:function(e,i){!1===n?d.html("\nError #"+i.code+": "+i.message):d.get(0).innerHTML+="\nError #"+i.code+": "+i.message},FileUploaded:function(i,a,t){var l=e.parseJSON(t.response);if(e("#"+a.id).remove(),l.success){var u=l.image_id+",";d.find(".noo-upload-value").val(u),!1===n?d.append('<div class="image-upload-thumb"><img width="150" src="'+l.image+'" /><input type="hidden" name="'+o+'" value="'+l.image_id+'" /><a class="delete-uploaded" data-fileid="'+l.image_id+'" href="#" title="'+nooUpload.remove_txt+'"><i class="fa fa-times-circle"></i></a></div>'):d.append('<div class="image-upload-thumb"><img width="150" src="'+l.image+'" /><input type="hidden" name="'+o+'[]" value="'+l.image_id+'" /><a class="delete-uploaded" data-fileid="'+l.image_id+'" href="#" title="'+nooUpload.remove_txt+'"><i class="fa fa-times-circle"></i></a></div>')}}}});u.init(),d.on("click",".image-upload-thumb .delete-uploaded",(function(i){i.preventDefault();var a=e(this);a.parent(".image-upload-thumb").remove();var t={attach_id:a.data("fileid")};return e.post(nooUpload.delete_url,t),!1}))}}(jQuery);