function onXingAuthLogin(e){if(null!==e.user){var o=e.user.display_name,i={action:"check_login",using:"xing",id:e.user.active_email};jQuery.post(nooSocial.ajax_url,i,(function(i){if("success"==i.status)jQuery(".noo-ajax-result").show().html(nooSocial.msgLoginSuccessful),xing.logout(),window.location.reload();else if("not_user"==i.status)if("both"==nooSocial.allow){var a=jQuery(".memberModalRegisterSocial");a.find(".register_social").hide(),a.find(".modal-header").css({background:"#0077b4","border-radius":"3px 2px 0 0"}),a.find(".close").css("color","#fff"),a.find(".modal-title").html(nooSocial.msgXingInModalTitle).css("color","#fff"),a.find(".register-heading").show().html(nooSocial.msgHi+o).css({margin:"0px 0px 20px 0px"}),jQuery(".memberModalLogin").modal("hide"),a.modal("show").removeClass("form-actions"),a.find('input[name="user_login"]').val(e.user.active_email),a.find('input[name="user_email"]').val(e.user.active_email);var n=random_pass();a.find('input[name="user_password"]').val(n),a.find('input[name="cuser_password"]').val(n),a.find("form").append('<input type="hidden" class="using" name="using" value="xing" /><input type="hidden" class="name" name="name" value="'+o+'" /><input type="hidden" class="using_id" name="using_id" value="'+e.user.active_email+'" />'),xing.logout()}else{var s={};"employer"==nooSocial.allow?s={action:"create_user",security:nooSocial.security,using:"xing",id:e.user.ative_email,userid:e.user.id,name:o,capbilities:"empoyer"}:(nooSocial.allow="candidate")&&(s={action:"create_user",security:nooSocial.security,using:"xing",id:e.user.active_email,userid:e.user.id,name:o,capbilities:"candidate"}),jQuery.post(nooSocial.ajax_url,s,(function(e){"success"==e.status&&(xing.logout(),window.location.reload())}))}else{if("error"===i.status)return jQuery(".noo-ajax-result").show().html(i.message),!1;jQuery(".noo-ajax-result").show().html(nooSocial.msgServerError)}}))}}function random_pass(){for(var e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<15;i++)e+=o.charAt(Math.floor(Math.random()*o.length));return e}jQuery(document).ready((function(e){e(".button_socical").on("click",".fa-facebook-square",(function(o){o.preventDefault();e(this);if("undefined"!=typeof FB)return FB.login((function(o){if(!o.authResponse)return e(".noo-ajax-result").show().html(nooSocial.msgFBUserCanceledLogin),!1;-1!==o.authResponse.grantedScopes.split(",").indexOf("email")?FB.api("/me?fields=name,email",(function(o){if(!o||o.error)e(".noo-ajax-result").show().html(nooSocial.msgMissingAppID);else if(o.email){var i={action:"check_login",using:"fb",id:o.email};e.post(nooSocial.ajax_url,i,(function(i){if("success"===i.status)e(".noo-ajax-result").show().html(nooSocial.msgLoginSuccessful),window.location.reload();else{if("not_user"!==i.status)return"error"===i.status?(e(".noo-ajax-result").show().html(i.message),!1):(e(".noo-ajax-result").show().html(nooSocial.msgServerError),!1);if("both"==nooSocial.allow){var a=e(".memberModalRegisterSocial");a.find(".register_social").hide(),a.find(".modal-header").css({background:"#2952aa","border-radius":"3px 2px 0 0"}),a.find(".close").css("color","#fff"),a.find(".modal-title").html(nooSocial.msgFacebookModalTitle).css("color","#fff"),a.find(".register-heading").show().html(nooSocial.msgHi+o.name).css({margin:"0px 0px 20px 0px"}),a.find('input[name="user_login"]').val(o.email),a.find('input[name="user_email"]').val(o.email);var n=random_pass();a.find('input[name="user_password"]').val(n),a.find('input[name="cuser_password"]').val(n),a.find("form").append('<input type="hidden" class="using" name="using" value="fb" /><input type="hidden" class="userid" name="userid" value="'+o.id+'" /><input type="hidden" class="name" name="name" value="'+o.name+'" /><input type="hidden" class="using_id" name="using_id" value="'+o.email+'" />'),e(".memberModalLogin").modal("hide"),a.modal("show")}else{var s={};"employer"==nooSocial.allow?s={action:"create_user",security:nooSocial.security,using:"facebook",id:o.email,userid:o.id,name:o.name,capabilities:"employer"}:"candidate"==nooSocial.allow&&(s={action:"create_user",security:nooSocial.security,using:"facebook",id:o.email,userid:o.id,name:o.name,capabilities:"candidate",birthday:o.birthday,address:o.address}),e.post(nooSocial.ajax_url,s,(function(e){"success"==e.status&&window.location.reload()}))}}}))}else e(".noo-ajax-result").show().html(nooSocial.msgFBMissingEmail)})):(e(".noo-ajax-result").show().html(nooSocial.msgFBMissingEmail),FB.api("/me/permissions","DELETE"))}),{scope:"email",return_scopes:!0}),!1}));""!==nooSocial.google_client_id&&"undefined"!=typeof gapi&&gapi.load("auth2",(function(){var o=nooSocial.google_client_id;o=o.split(".")[0];var i=nooSocial.google_client_secret;auth2=gapi.auth2.init({client_id:o+".apps.googleusercontent.com",cookiepolicy:i}),e(".button_socical .fa-google").each((function(){var o;o=this.id,auth2.attachClickHandler(o,{},(function(i){var a=i.getAuthResponse(),n={action:"check_login",using:"gg",id:i.getBasicProfile().getEmail(),id_token:a.id_token};$this=e(o),e.post(nooSocial.ajax_url,n,(function(o){if("success"===o.status)e(".noo-ajax-result").show().html(nooSocial.msgLoginSuccessful),window.location.reload();else if("not_user"===o.status)if("both"==nooSocial.allow){var a=e(".memberModalRegisterSocial");a.find(".register_social").hide(),a.find(".modal-header").css({background:"#cc3d2d","border-radius":"3px 2px 0 0"}),a.find(".close").css("color","#fff"),a.find(".modal-title").html(nooSocial.msgGoogleModalTitle).css("color","#fff"),a.find(".register-heading").show().html(nooSocial.msgHi+i.getBasicProfile().getName()).css({margin:"0px 0px 20px 0px"}),e(".memberModalLogin").modal("hide"),a.modal("show").removeClass("form-actions"),a.find('input[name="user_login"]').val(i.getBasicProfile().getEmail()),a.find('input[name="user_email"]').val(i.getBasicProfile().getEmail());var n=random_pass();a.find('input[name="user_password"]').val(n),a.find('input[name="cuser_password"]').val(n),a.find("form").append('<input type="hidden" class="using" name="using" value="gg" /><input type="hidden" class="userid" name="userid" value="'+i.getBasicProfile().getId()+'" /><input type="hidden" class="name" name="name" value="'+i.getBasicProfile().getName()+'" /><input type="hidden" class="using_id" name="using_id" value="'+i.getBasicProfile().getEmail()+'" />')}else{var s={};"employer"==nooSocial.allow?s={action:"create_user",security:nooSocial.security,using:"google",id:i.getBasicProfile().getEmail(),userid:i.getBasicProfile().getId(),name:i.getBasicProfile().getName(),capabilities:"employer"}:"candidate"==nooSocial.allow&&(s={action:"create_user",security:nooSocial.security,using:"google",id:i.getBasicProfile().getEmail(),userid:i.getBasicProfile().getId(),name:i.getBasicProfile().getName(),capabilities:"candidate"}),e.post(nooSocial.ajax_url,s,(function(e){"success"==e.status&&window.location.reload()}))}else{if("error"===o.status)return e(".noo-ajax-result").show().html(o.message),!1;e(".noo-ajax-result").show().html(nooSocial.msgServerError)}}))}),(function(o){return e(".noo-ajax-result").show().html(o),!1}))}))}))})),window.fbAsyncInit=function(){FB.init({appId:nooSocial.facebook_api,cookie:!0,xfbml:!0,version:"v2.5"})},""!==nooSocial.facebook_api&&function(e,o,i){var a,n=e.getElementsByTagName(o)[0];e.getElementById(i)||((a=e.createElement(o)).id=i,a.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(a,n))}(document,"script","facebook-jssdk"),""!==nooSocial.xing_consumer_key&&function(e){var o;e.getElementById("lwx")||((o=e.createElement("script")).id="lwx",o.src="https://www.xing-share.com/plugins/login.js",e.getElementsByTagName("head")[0].appendChild(o))}(document);